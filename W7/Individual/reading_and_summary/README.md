# 個人作業


## 閱讀以上補充資料，並用自己的話簡述 flash loan 的運作方式與應用場景


![](https://i.imgur.com/m5bGNRy.jpg)


### 閃電貸的重點

* 一個區塊時間或者一筆交易內，完成貸款與還款的操作（目前以太坊的出塊速度是13秒，也就是說必須在貸款後13秒內完成還款）。
* 所有閃電貸都是通過區塊鏈上的智能合約完成的，並且規定如果借款人沒有在單個區塊鏈交易中歸還資金，則貸款過程將被逆轉，就好像它從未發生過一樣。這個關鍵的區別就是為什麼借款人能夠在沒有任何抵押品或信用檢查的情況下獲得快速貸款，因為它消除了貸方的任何風險。
* 貸款過程是即時的，因此一旦貸款延期，借款人必須調用其他智能合約來利用閃電貸嘗試執行幾乎即時的交易，然後在單塊交易結束前將資金返還，通常在幾秒鐘內。
* 一個交易代表了一組必須以「原子方式」執行的操作，原子方式指的是要麼所有的步驟都被執行，要麼交易被回滾，一個步驟都不會被執行。
* 執行閃電貸最重要的是找到一個閃電貸提供商。Aave 或 dYdX 等項目開發了智能合約，允許 DeFi 用戶從指定的池子中借到不同的幣，前提條件是在同一個以太坊交易內償還。使用閃貸通常有固定的成本。例如，Aave 合約要求借款人歸還初始金額 + 0.09% 的借款金額。0.09% 這筆費用將會分給存款人和集成商，前者給出了可供借貸的資金，後者爲使用 Aave 的閃電貸 API 提供便利。這筆費用的一部分也會被換成 AAVE 代幣。

### 閃電貸常見案例

* 套利 Arbitrage

利用閃電貸套利的方式非常多種，以下將解釋最常見的套利方式，利用不同交易所的價格差來進行套利。

```
ETH 在 Uniswap 的價格：2000
ETH 在 Sushiswap 的價格：2001
```
套利步驟為

```
1. 在去中心化借貸平台如 Aave 使用閃電貸借入一筆 USDC。
2. 在 Uniswap 以 2000 的價格買入 ETH。
3. 在 Sushiswap 以 2001 的價格賣掉 ETH。
4. 向 Aave 償還 USDC 貸款。
5. 賺取差價利潤。
```

需要考慮到以下幾個因素

```
1. 網絡費用 - 在計算利潤時，一定要將交易費用考慮在內。
2. 價格滑點 
3. Frontrunning — 很有可能別人會發現同樣的機會，並且會搶先你一步行動。
```

* 清算自己的債務 Self-liquidation

假設現在 ETH 價格為 2000 USDC，而你在 Aave 抵押了 1 ETH 借到了 1000 USDC，而 ETH 的價格一直下跌到 1500 USDC，即將跌到清算價格，這時候你想要將 ETH 拿回來賣掉止損，正常情況下你需要 1000 USDC 才能夠拿回你抵押的 ETH。但如果使用閃電貸，你可以在沒有錢償還債務的情況下拿回你抵押的 1 ETH，步驟如下

```
1. 在去中心化借貸平台如 Aave 使用閃電貸借入 1000 USDC。
2. 償還 1000 USDC 的債務並拿回 1 ETH 的抵押品。
3. 將 1 ETH 換成 1500 USDC。
4. 使用 1000 USDC 償還閃電貸貸款。
5. 持有剩下的 500 USDC。
```

* 替換抵押品 Collateral Swapping

假設你在 Aave 抵押了 1 ETH 借到了 1000 USDC，而你覺得 ETH 當抵押品可能相對沒有那麼穩定，你想要換成等值的 BTC 當作抵押品，正常的情況下你必須要先償還 1000 USDC 才能夠做到，但是有了閃電貸的幫助，能夠讓你在不還債的情況下做到這件事，步驟如下

```
1. 在去中心化借貸平台如 Aave 使用閃電貸借入 1000 USDC。
2. 利用這 1000 USDC 去還債並且將你的抵押品（1 ETH）拿回來。
3. 將 1 ETH 換成等值的 BTC。
4. 將等值的 BTC 拿去抵押並借入 1000 USDC。
5. 利用借入的 1000 USDC 償還閃電貸的貸款。
```

--

資料來源： 
```
https://www.grenade.tw/blog/defi-flashloan-transaction/
https://medium.com/taipei-ethereum-meetup/%E7%84%A1%E9%A0%88%E6%8A%B5%E6%8A%BC%E5%93%81%E5%B0%B1%E5%8F%AF%E4%BB%A5%E8%B2%B8%E6%AC%BE-%E5%88%A9%E7%94%A8-aave-%E5%AF%A6%E4%BD%9C%E9%96%83%E9%9B%BB%E8%B2%B8-%E4%B8%8A-3d8573df00f3
```


--

## 課外好文

[閃電貸技術詳解](https://www.aqniu.com/vendor/87319.html)

[DeFi 深入探索：一文讀懂 Aave 的前世今生](https://blockcast.it/2021/09/10/defi-aave-what-you-need-to-know/)

[無須抵押品就可以貸款？利用 Aave 實作閃電貸（上）](https://medium.com/taipei-ethereum-meetup/%E7%84%A1%E9%A0%88%E6%8A%B5%E6%8A%BC%E5%93%81%E5%B0%B1%E5%8F%AF%E4%BB%A5%E8%B2%B8%E6%AC%BE-%E5%88%A9%E7%94%A8-aave-%E5%AF%A6%E4%BD%9C%E9%96%83%E9%9B%BB%E8%B2%B8-%E4%B8%8A-3d8573df00f3)